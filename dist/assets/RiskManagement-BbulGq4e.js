import{r,d,j as e,L as p}from"./index-Bh_G82eR.js";import{j as c,B as u}from"./index.esm-BGr2I2xK.js";import"./iconBase-D0Fi-Wjo.js";function y(){const[a,n]=r.useState([]),[o,x]=r.useState(!0),[t,h]=r.useState("");r.useEffect(()=>{i()},[]);const i=async()=>{try{const s=await d.get("/admin/risk/high-risk-vendors");n(s.data.data||[])}catch(s){console.error("Failed to fetch high risk vendors:",s)}finally{x(!1)}},m=async s=>{try{await d.patch(`/admin/risk/vendors/${s}/recalculate`),i()}catch(g){console.error("Failed to recalculate risk:",g)}},l=a.filter(s=>t?t==="critical"?s.riskScore>=80:t==="high"?s.riskScore>=50&&s.riskScore<80:!0:!0);return o?e.jsx("div",{className:"p-6 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Risk Management"}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1 flex items-center gap-2",children:["Monitor high-risk accounts and anomalies |",e.jsxs(p,{to:"/dashboard/security",className:"text-blue-600 hover:underline flex items-center gap-1 font-bold",children:[e.jsx(c,{})," Open Security SOC"]})]})]}),e.jsx("div",{children:e.jsxs("select",{value:t,onChange:s=>h(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"All Risks"}),e.jsx("option",{value:"critical",children:"Critical Only (80+)"}),e.jsx("option",{value:"high",children:"High Only (50-79)"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:e.jsx("div",{className:"bg-red-50 border border-red-100 p-6 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:e.jsx(u,{className:"text-red-600 text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"High Risk Objects"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[a.length," vendors have been flagged with high risk scores requiring attention."]})]})]})})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Flagged Vendors"}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Vendor"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Risk Score"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider text-right",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[l.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.storeName}),e.jsx("div",{className:"text-sm text-gray-500",children:s.ownerName})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-600 font-bold",children:[e.jsx(c,{}),s.riskScore]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-700",children:"High Risk"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>m(s._id),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Recalculate Score"})})]},s._id)),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-500",children:"No high risk vendors matches filter."})})]})]})})]})]})}export{y as default};
