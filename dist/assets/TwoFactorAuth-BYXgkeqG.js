import{r as d,a as b,u as g,b as y,j as e}from"./index-Bh_G82eR.js";import{a as m,b as j,c as u,s as v}from"./swal-Bzj92f0x.js";import{j as A,F}from"./index.esm-BGr2I2xK.js";import{m as w}from"./proxy-B-BKHVQZ.js";import"./sweetalert2.esm.all-B3GDCxSY.js";import"./iconBase-D0Fi-Wjo.js";function T(){var n;const[t,x]=d.useState(""),[o,r]=d.useState(!1),{verify2FA:h}=b(),a=g(),i=(n=y().state)==null?void 0:n.tempToken;if(!i)return a("/login",{replace:!0}),null;const p=async s=>{var l,c;if(s.preventDefault(),t.length!==6){m("Please enter a 6-digit code","Invalid Code");return}r(!0),j("Verifying code...");try{await h(i,t),u(),v("Welcome back!","Verification Successful"),a("/dashboard",{replace:!0})}catch(f){u(),m(((c=(l=f.response)==null?void 0:l.data)==null?void 0:c.message)||"Invalid or expired 2FA code","Verification Failed")}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-[#F5F5DC] flex items-center justify-center p-4",children:e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl w-full max-w-md px-8 py-10 relative z-10 mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#D4AF37]/10 mb-4",children:e.jsx(A,{className:"text-3xl text-[#D4AF37]"})}),e.jsx("h1",{className:"text-2xl font-bold text-[#4A3728] mb-2",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-[#4A3728]/70 text-sm",children:"Enter the 6-digit verification code from your authenticator app to continue."})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-[#4A3728] text-center",children:"Authentication Code"}),e.jsx("input",{type:"text",value:t,onChange:s=>x(s.target.value.replace(/\D/g,"").slice(0,6)),required:!0,className:"block w-full px-4 py-4 bg-[#F5F5DC]/50 border-2 border-transparent focus:bg-white focus:border-[#D4AF37] rounded-xl focus:ring-4 focus:ring-[#D4AF37]/10 transition-all outline-none text-[#4A3728] text-center text-3xl font-bold tracking-[0.5em] placeholder-gray-300",placeholder:"000000",maxLength:6,autoFocus:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{type:"submit",disabled:o||t.length!==6,className:"w-full bg-[#D8C3A5] hover:bg-[#D4AF37] text-[#4A3728] py-4 rounded-xl font-bold shadow-sm hover:shadow-md transition-all duration-200 text-lg flex items-center justify-center gap-2 disabled:opacity-50",children:o?e.jsx("div",{className:"w-6 h-6 border-2 border-[#4A3728] border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(F,{})," Verify & Login"]})}),e.jsx("button",{type:"button",onClick:()=>a("/login"),className:"w-full text-sm text-[#4A3728]/60 hover:text-[#4A3728] transition-colors font-medium py-2",children:"Back to Login"})]})]}),e.jsx("div",{className:"mt-8 p-4 bg-amber-50 rounded-xl border border-amber-100",children:e.jsx("p",{className:"text-xs text-amber-800 text-center leading-relaxed",children:"If you've lost access to your authenticator app, please contact the system administrator or use a recovery code."})})]})})}export{T as default};
