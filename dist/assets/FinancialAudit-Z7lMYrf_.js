import{r,d as n,j as e}from"./index-Bh_G82eR.js";import{b as q,c as M,d as J,e as K,f as Q,g as X,h as Y}from"./index.esm-DdX2Oo8i.js";import{n as Z}from"./index-B7n9UX3I.js";import{l as _}from"./logger-kjsKaDI_.js";import"./iconBase-D0Fi-Wjo.js";const de=()=>{var o,h,p,m,b,u,y,w,j,f,k,N,v,S,C,L,F,I,$,E,D,H,z,A,P,R,G,W;const[s,V]=r.useState(null),[t,O]=r.useState(null),[i,T]=r.useState([]),[c,g]=r.useState(!0),[d,U]=r.useState("NGN"),x=r.useCallback(async()=>{g(!0);try{const[a,l,B]=await Promise.all([n.get("/admin/oversight/finance/overview"),n.get("/admin/oversight/finance/withdrawals"),n.get(`/admin/oversight/finance/reconciliation?currency=${d}`)]);a.data.success&&V(a.data.data),l.data.success&&T(l.data.data),B.data.success&&O(B.data.data)}catch(a){_.error("Failed to fetch financial audit data:",a),Z.error("Failed to load financial oversight data")}finally{g(!1)}},[d]);return r.useEffect(()=>{x()},[x]),e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-white/5",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-black text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-50 dark:bg-orange-900/20 flex items-center justify-center text-orange-500",children:e.jsx(q,{size:20})}),"Financial Oversight"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1 text-sm font-medium",children:"Reconciliation variance and platform liquidity."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:d,onChange:a=>U(a.target.value),className:"bg-gray-100 dark:bg-white/5 border-none rounded-xl px-4 py-2 font-black text-[10px] uppercase tracking-widest text-gray-900 dark:text-white focus:ring-1 focus:ring-orange-500 cursor-pointer",children:[e.jsx("option",{value:"NGN",children:"NGN (₦)"}),e.jsx("option",{value:"USD",children:"USD ($)"})]}),e.jsxs("button",{onClick:x,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-gray-900 dark:bg-white text-white dark:text-black rounded-xl font-bold text-xs uppercase tracking-widest transition-all hover:scale-105 active:scale-95 disabled:opacity-50",children:[e.jsx(M,{className:c?"animate-spin":"",size:12}),"Sync"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-2xl border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-black text-gray-900 dark:text-white",children:"Escrow Integrity"}),e.jsx("span",{className:"text-[9px] font-black text-blue-500 uppercase tracking-widest bg-blue-50 px-2 py-1 rounded-md",children:"V1 Formula"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-black/20 rounded-xl",children:[e.jsx("span",{className:"text-[11px] font-bold text-gray-500",children:"Order Totals"}),e.jsxs("span",{className:"font-black text-gray-900 dark:text-white text-sm",children:["₦",((h=(o=t==null?void 0:t.escrowIntegrity)==null?void 0:o[0])==null?void 0:h.totalPricing.toLocaleString())||0]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-black/20 rounded-xl",children:[e.jsx("span",{className:"text-[11px] font-bold text-gray-500",children:"Escrow Held"}),e.jsxs("span",{className:"font-black text-gray-900 dark:text-white text-sm",children:["₦",((m=(p=t==null?void 0:t.escrowIntegrity)==null?void 0:p[0])==null?void 0:m.escrowHeld.toLocaleString())||0]})]}),e.jsxs("div",{className:`flex justify-between items-center p-4 rounded-xl border ${Math.abs(((u=(b=t==null?void 0:t.escrowIntegrity)==null?void 0:b[0])==null?void 0:u.totalPricing)-((w=(y=t==null?void 0:t.escrowIntegrity)==null?void 0:y[0])==null?void 0:w.escrowHeld))>1e3?"border-red-200 bg-red-50":"border-green-200 bg-green-50"}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-gray-500",children:"Variance"}),e.jsxs("p",{className:`text-xl font-black ${Math.abs(((f=(j=t==null?void 0:t.escrowIntegrity)==null?void 0:j[0])==null?void 0:f.totalPricing)-((N=(k=t==null?void 0:t.escrowIntegrity)==null?void 0:k[0])==null?void 0:N.escrowHeld))>1e3?"text-red-500":"text-green-500"}`,children:["₦",(((S=(v=t==null?void 0:t.escrowIntegrity)==null?void 0:v[0])==null?void 0:S.totalPricing)-((L=(C=t==null?void 0:t.escrowIntegrity)==null?void 0:C[0])==null?void 0:L.escrowHeld)||0).toLocaleString()]})]}),Math.abs(((I=(F=t==null?void 0:t.escrowIntegrity)==null?void 0:F[0])==null?void 0:I.totalPricing)-((E=($=t==null?void 0:t.escrowIntegrity)==null?void 0:$[0])==null?void 0:E.escrowHeld))>1e3&&e.jsx(J,{className:"text-red-500",size:20})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-2xl border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-black text-gray-900 dark:text-white",children:"Ledger Consistency"}),e.jsx("span",{className:"text-[9px] font-black text-purple-500 uppercase tracking-widest bg-purple-50 px-2 py-1 rounded-md",children:"V1 Formula"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-black/20 rounded-xl",children:[e.jsx("span",{className:"text-[11px] font-bold text-gray-500",children:"Total Credits"}),e.jsxs("span",{className:"font-black text-gray-900 dark:text-white text-sm",children:[d==="NGN"?"₦":"$",((D=t==null?void 0:t.ledgerCheck)==null?void 0:D.totalCredits.toLocaleString())||0]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-black/20 rounded-xl",children:[e.jsx("span",{className:"text-[11px] font-bold text-gray-500",children:"Wallet Sum"}),e.jsxs("span",{className:"font-black text-gray-900 dark:text-white text-sm",children:[d==="NGN"?"₦":"$",((H=t==null?void 0:t.ledgerCheck)==null?void 0:H.walletSum.toLocaleString())||0]})]}),e.jsx("div",{className:`flex justify-between items-center p-4 rounded-xl border ${Math.abs(((z=t==null?void 0:t.ledgerCheck)==null?void 0:z.totalCredits)-((A=t==null?void 0:t.ledgerCheck)==null?void 0:A.walletSum))>1e3?"border-red-200 bg-red-50":"border-green-200 bg-green-50"}`,children:e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-gray-500",children:"Balance Drift"}),e.jsxs("p",{className:`text-xl font-black ${Math.abs(((P=t==null?void 0:t.ledgerCheck)==null?void 0:P.totalCredits)-((R=t==null?void 0:t.ledgerCheck)==null?void 0:R.walletSum))>1e3?"text-red-500":"text-green-500"}`,children:[d==="NGN"?"₦":"$",(((G=t==null?void 0:t.ledgerCheck)==null?void 0:G.totalCredits)-((W=t==null?void 0:t.ledgerCheck)==null?void 0:W.walletSum)||0).toLocaleString()]})]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-gray-400 text-[9px] font-black uppercase tracking-widest",children:"Vendor Balances"}),e.jsx("div",{className:"p-2 bg-green-50 text-green-500 rounded-lg",children:e.jsx(K,{size:14})})]}),e.jsxs("h3",{className:"text-2xl font-black text-gray-900 dark:text-white",children:["₦",((s==null?void 0:s.systemBalances.totalAvailable)||0).toLocaleString()]}),e.jsxs("p",{className:"text-[10px] text-gray-400 font-bold mt-1 uppercase",children:["Across ",(s==null?void 0:s.systemBalances.storeCount)||0," Stores"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-gray-400 text-[9px] font-black uppercase tracking-widest",children:"Escrow (Held)"}),e.jsx("div",{className:"p-2 bg-blue-50 text-blue-500 rounded-lg",children:e.jsx(Q,{size:14})})]}),e.jsxs("h3",{className:"text-2xl font-black text-gray-900 dark:text-white",children:["₦",((s==null?void 0:s.systemBalances.totalEscrow)||0).toLocaleString()]}),e.jsx("p",{className:"text-[10px] text-blue-500 font-bold mt-1 uppercase tracking-tighter",children:"Awaiting Release"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-gray-400 text-[9px] font-black uppercase tracking-widest",children:"Lifecycle Payouts"}),e.jsx("div",{className:"p-2 bg-purple-50 text-purple-500 rounded-lg",children:e.jsx(X,{size:14})})]}),e.jsxs("h3",{className:"text-2xl font-black text-gray-900 dark:text-white",children:["₦",((s==null?void 0:s.withdrawals.totalWithdrawn)||0).toLocaleString()]}),e.jsxs("p",{className:"text-[10px] text-purple-500 font-bold mt-1 uppercase",children:[(s==null?void 0:s.withdrawals.count)||0," Withdrawals"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-100 dark:border-white/5 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-white/5 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-black text-gray-900 dark:text-white font-display uppercase tracking-widest",children:"Withdrawal Feed"}),e.jsxs("span",{className:"text-[9px] font-black uppercase tracking-widest text-green-500 flex items-center gap-1.5 animate-pulse",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),"Live"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50/50 dark:bg-black/20 border-b border-gray-100 dark:border-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Vendor"}),e.jsx("th",{className:"px-6 py-4 text-left text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Amount"}),e.jsx("th",{className:"px-6 py-4 text-left text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-white/5",children:c&&i.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:4,className:"py-10 text-center",children:[e.jsx(M,{className:"animate-spin text-gray-300 mx-auto mb-2",size:24}),e.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-gray-400",children:"Loading Feed..."})]})}):i.slice(0,10).map((a,l)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-white/5 transition-colors group",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-xs",children:a.userName}),e.jsx("p",{className:"text-[9px] text-gray-400 truncate max-w-[120px]",children:a.userEmail})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-black text-gray-900 dark:text-white text-xs flex items-center gap-1.5",children:[e.jsx(Y,{className:"text-red-500 text-[8px]"}),"₦",a.amount.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-[8px] font-black uppercase tracking-widest border ${a.status==="completed"?"bg-green-50 text-green-600 border-green-200":"bg-orange-50 text-orange-600 border-orange-200"}`,children:a.status})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("p",{className:"text-[10px] font-bold text-gray-500",children:new Date(a.createdAt).toLocaleDateString()})})]},l))})]})})]})]})};export{de as default};
