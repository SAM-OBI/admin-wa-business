import{e as b,u as j,a as v,r as l,j as e}from"./index-Bh_G82eR.js";import{x as N,F as c}from"./index.esm-BGr2I2xK.js";import"./iconBase-D0Fi-Wjo.js";const S=()=>{const{token:o}=b(),u=j(),x=v(s=>s.resetPassword),[d,h]=l.useState(""),[n,f]=l.useState(""),[t,r]=l.useState("idle"),[w,a]=l.useState("");l.useEffect(()=>{o||(r("error"),a("Invalid or missing reset token."))},[o]);const g=async s=>{var i,m;if(s.preventDefault(),d!==n){a("Passwords do not match"),r("error");return}if(d.length<6){a("Password must be at least 6 characters"),r("error");return}r("loading"),a("");try{o&&(await x(o,d),r("success"),setTimeout(()=>{u("/login")},3e3))}catch(p){r("error"),a(((m=(i=p.response)==null?void 0:i.data)==null?void 0:m.message)||"Something went wrong. Please try again or request a new link.")}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Set new password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Please enter your new password below."})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:t==="success"?e.jsx("div",{className:"rounded-md bg-green-50 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(N,{className:"h-5 w-5 text-green-400","aria-hidden":"true"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Password reset successfully"}),e.jsx("div",{className:"mt-2 text-sm text-green-700",children:e.jsx("p",{children:"Redirecting you to login..."})})]})]})}):e.jsxs("form",{className:"space-y-6",onSubmit:g,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(c,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:d,onChange:s=>h(s.target.value),className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md",placeholder:"New Password"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(c,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:n,onChange:s=>f(s.target.value),className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Confirm Password"})]})]}),t==="error"&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-sm font-medium text-red-800",children:w})})})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:t==="loading",className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white 
                    ${t==="loading"?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}`,children:t==="loading"?"Resetting...":"Reset Password"})})]})})})]})};export{S as default};
