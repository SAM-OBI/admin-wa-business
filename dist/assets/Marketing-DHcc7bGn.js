import{r as a,j as e}from"./index-Bh_G82eR.js";import{a as h}from"./admin.service-DANvCZDH.js";import{J as u,Z as y}from"./index.esm-BGr2I2xK.js";import"./iconBase-D0Fi-Wjo.js";function v(){const[i,c]=a.useState([]),[p,o]=a.useState(!0),[d,m]=a.useState(""),[t,g]=a.useState({page:1,limit:20,total:0,pages:1}),n=a.useCallback(async(s=1)=>{var r;o(!0);try{const l=await h.getMarketingDiscountCodes({page:s,limit:t.limit,search:d});(r=l.data)!=null&&r.discountCodes?(c(l.data.discountCodes),g(l.data.pagination)):c([])}catch(l){console.error("Failed to fetch discount codes:",l)}finally{o(!1)}},[d,t.limit]);a.useEffect(()=>{n(1)},[n]);const x=s=>{s>=1&&s<=t.pages&&n(s)};return p&&i.length===0?e.jsx("div",{className:"p-6 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Marketing Hub"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Monitor active discount codes across stores"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search codes...",value:d,onChange:s=>m(s.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-64"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Store"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Usage"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider text-right",children:"Created"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[i.map(s=>{var r;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded text-blue-600",children:e.jsx(y,{})}),e.jsx("span",{className:"font-mono font-bold text-gray-900",children:s.code})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:((r=s.storeId)==null?void 0:r.name)||"Unknown Store"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"capitalize font-medium",children:s.type}),e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",s.type==="percentage"?`${s.value}%`:`₦${s.value}`,")"]})]})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[s.usedCount," / ",s.usageLimit===0?"∞":s.usageLimit]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.status==="active"?"bg-green-100 text-green-700":s.status==="expired"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 text-right text-sm text-gray-500",children:new Date(s.createdAt).toLocaleDateString()})]},s._id)}),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"No discount codes found."})})]})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",e.jsx("span",{className:"font-medium",children:i.length})," of ",e.jsx("span",{className:"font-medium",children:t.total})," codes"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>x(t.page-1),disabled:t.page<=1,className:"px-3 py-1 border border-gray-300 rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),e.jsxs("span",{className:"px-3 py-1 text-sm text-gray-700",children:["Page ",t.page," of ",t.pages]}),e.jsx("button",{onClick:()=>x(t.page+1),disabled:t.page>=t.pages,className:"px-3 py-1 border border-gray-300 rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})]})}export{v as default};
