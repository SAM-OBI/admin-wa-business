import{e as he,r as n,j as e,L as ae}from"./index-Bh_G82eR.js";import{a as d}from"./admin.service-DANvCZDH.js";import{w as ue,j as x,d as pe,D as ge,y as je,r as be,v as fe,$ as Ne,I as ve,B as ye,x as ie,L as ne,O as we}from"./index.esm-BGr2I2xK.js";import"./iconBase-D0Fi-Wjo.js";function Ae(){var h,u,p,g,j,b,f,N,v,y,w,S,k,D,R,A,F,C,V,P,L,U,$,E,O,I,T,z,B,M,_,G,H,J,X,q,K,Q,W,Y,Z,ee,se,te,re;const{id:a}=he(),[s,le]=n.useState(null),[de,m]=n.useState(!0),[c,ce]=n.useState(!1),i=n.useCallback(async()=>{m(!0);try{const t=await d.getVendorById(a);le(t.data)}catch(t){console.error("Failed to fetch vendor details:",t)}finally{m(!1)}},[a]);n.useEffect(()=>{a&&i()},[a,i]);const oe=async()=>{const t=prompt("Enter reason for suspension:");if(t)try{await d.suspendVendor(a,t),i()}catch(r){console.error("Failed to suspend vendor:",r)}},xe=async()=>{try{await d.activateVendor(a),i()}catch(t){console.error("Failed to activate vendor:",t)}},o=async t=>{let r;if(!(t==="rejected"&&(r=prompt("Enter reason for rejection:"),!r)))try{await d.updateVendorVerification(a,t,r),i()}catch(l){console.error("Failed to update verification:",l)}};if(de)return e.jsx("div",{className:"p-6 flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!s)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Vendor not found"}),e.jsx(ae,{to:"/vendors",className:"text-blue-600 hover:underline mt-4 inline-block",children:"Back to Vendors"})]})});const me=()=>{var l;const t=((l=s.riskProfile)==null?void 0:l.level)||"low",r={low:"bg-green-100 text-green-700",medium:"bg-yellow-100 text-yellow-700",high:"bg-orange-100 text-orange-700",critical:"bg-red-100 text-red-700"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${r[t]}`,children:t.toUpperCase()})};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(ae,{to:"/vendors",className:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-4",children:[e.jsx(ue,{className:"mr-2"}),"Back to Vendors"]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:s.name}),e.jsx("p",{className:"text-gray-500 mt-1",children:s.email})]}),e.jsxs("div",{className:"flex gap-2",children:[((h=s.verification)==null?void 0:h.status)==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>o("verified"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:"Approve Verification"}),e.jsx("button",{onClick:()=>o("rejected"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Reject Verification"})]}),((u=s.verification)==null?void 0:u.status)==="locked"&&e.jsxs("button",{onClick:()=>o("unverified"),className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition flex items-center gap-2",children:[e.jsx(x,{})," Unlock Account"]}),s.isActive?e.jsx("button",{onClick:oe,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Suspend Vendor"}):e.jsx("button",{onClick:xe,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:"Activate Vendor"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:s.productCount||0})]}),e.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(pe,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:((p=s.orderStats)==null?void 0:p.totalOrders)||0})]}),e.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(ge,{className:"text-green-600",size:24})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:["₦",(((g=s.orderStats)==null?void 0:g.totalRevenue)||0).toLocaleString()]})]}),e.jsx("div",{className:"h-12 w-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(je,{className:"text-purple-600",size:24})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Risk Score"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:[((j=s.riskProfile)==null?void 0:j.score)||0,"/100"]})]}),e.jsx("div",{className:"h-12 w-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(x,{className:"text-orange-600",size:24})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Full Name"}),e.jsx("p",{className:"font-medium text-gray-800",children:s.name})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-800",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ne,{className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("p",{className:"font-medium text-gray-800",children:s.phone||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Joined"}),e.jsx("p",{className:"font-medium text-gray-800",children:new Date(s.createdAt).toLocaleDateString()})]})]})]})]}),s.store&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Store Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Store Name"}),e.jsx("p",{className:"font-medium text-gray-800",children:s.store.storeName})]}),s.store.storeDescription&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Description"}),e.jsx("p",{className:"text-gray-700",children:s.store.storeDescription})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Risk Profile"}),me()]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Risk Score"}),e.jsxs("span",{className:"font-bold",children:[((b=s.riskProfile)==null?void 0:b.score)||0,"/100"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${(((f=s.riskProfile)==null?void 0:f.score)||0)<30?"bg-green-600":(((N=s.riskProfile)==null?void 0:N.score)||0)<70?"bg-yellow-600":"bg-red-600"}`,style:{width:`${((v=s.riskProfile)==null?void 0:v.score)||0}%`}})})]}),((y=s.riskProfile)==null?void 0:y.flags)&&s.riskProfile.flags.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Risk Flags"}),e.jsx("div",{className:"space-y-2",children:s.riskProfile.flags.map((t,r)=>e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 rounded-lg",children:[e.jsx(ye,{className:"text-red-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-red-900",children:t.type.replace(/_/g," ")}),e.jsx("p",{className:"text-sm text-red-700",children:t.description}),e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[new Date(t.date).toLocaleDateString(),t.resolved&&e.jsx("span",{className:"ml-2 text-green-600",children:"✓ Resolved"})]})]})]},r))})]})]}),s.recentComplaints&&s.recentComplaints.length>0&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Recent Complaints"}),e.jsx("div",{className:"space-y-3",children:s.recentComplaints.map(t=>e.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.status==="resolved"?"bg-green-100 text-green-700":t.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:t.status})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(t.createdAt).toLocaleDateString()})]},t._id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Account Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Active Status"}),e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${s.isActive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[s.isActive?e.jsx(ie,{className:"mr-1"}):e.jsx(ne,{className:"mr-1"}),s.isActive?"Active":"Suspended"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Verification"}),e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${((w=s.verification)==null?void 0:w.status)==="verified"?"bg-green-100 text-green-700":((S=s.verification)==null?void 0:S.status)==="pending"?"bg-yellow-100 text-yellow-700":((k=s.verification)==null?void 0:k.status)==="rejected"?"bg-red-100 text-red-700":((D=s.verification)==null?void 0:D.status)==="locked"?"bg-orange-100 text-orange-800":((R=s.verification)==null?void 0:R.status)==="failed"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:[((A=s.verification)==null?void 0:A.status)==="verified"&&e.jsx(ie,{className:"mr-1"}),(((F=s.verification)==null?void 0:F.status)==="pending"||((C=s.verification)==null?void 0:C.status)==="locked")&&e.jsx(x,{className:"mr-1"}),(((V=s.verification)==null?void 0:V.status)==="rejected"||((P=s.verification)==null?void 0:P.status)==="failed")&&e.jsx(ne,{className:"mr-1"}),((L=s.verification)==null?void 0:L.status)||"unverified"]})]}),((U=s.verification)==null?void 0:U.status)==="locked"&&e.jsxs("div",{className:"mt-2 p-3 bg-orange-50 border border-orange-100 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-orange-800",children:"Account Locked"}),e.jsxs("p",{className:"text-sm text-orange-700 mt-1",children:["This account was automatically locked after ",s.verification.attempts||5," failed verification attempts."]}),e.jsx("p",{className:"text-xs text-orange-600 mt-2 font-medium",children:"0 attempts remaining"})]}),(($=s.verification)==null?void 0:$.status)==="failed"&&e.jsxs("div",{className:"mt-2 p-3 bg-red-50 border border-red-100 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-red-800",children:"Verification Failed"}),s.verification.failureReason&&e.jsx("p",{className:"text-sm text-red-700 mt-1",children:s.verification.failureReason}),e.jsxs("p",{className:"text-xs text-red-600 mt-2 font-medium",children:[Math.max(0,5-(s.verification.attempts||0))," attempt(s) remaining before account lockout."]})]}),((E=s.verification)==null?void 0:E.status)!=="unverified"&&e.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:["Government ID (",((O=s.verification)==null?void 0:O.method)||"N/A",")"]}),((I=s.verification)==null?void 0:I.idNumber)&&e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-600 font-medium font-mono text-sm",children:c?s.verification.idNumber:"•".repeat(Math.min(s.verification.idNumber.length,10))}),e.jsx("button",{onClick:()=>ce(!c),className:"text-xs text-blue-600 hover:text-blue-800 underline font-medium",children:c?"Hide":"View"})]}),(((T=s.verification)==null?void 0:T.documentUrl)||s.governmentIdUrl)&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:((z=s.verification)==null?void 0:z.documentUrl)||s.governmentIdUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800 font-medium",children:[e.jsx(we,{size:14})," View Document"]})})]}),!s.isActive&&((B=s.accountStatus)==null?void 0:B.reason)&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-900",children:"Suspension Reason:"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:s.accountStatus.reason}),s.accountStatus.suspendedAt&&e.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Suspended on ",new Date(s.accountStatus.suspendedAt).toLocaleDateString()]})]}),((M=s.verification)==null?void 0:M.status)==="rejected"&&s.verification.rejectionReason&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-900",children:"Rejection Reason:"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:s.verification.rejectionReason})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Subscription Plan"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Current Plan"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${((_=s.subscription)==null?void 0:_.plan)==="gold"?"bg-yellow-100 text-yellow-700":((G=s.subscription)==null?void 0:G.plan)==="premium"?"bg-purple-100 text-purple-700":((H=s.subscription)==null?void 0:H.plan)==="basic"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:((X=(J=s.subscription)==null?void 0:J.plan)==null?void 0:X.toUpperCase())||"FREE"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Status"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${((q=s.subscription)==null?void 0:q.status)==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:((K=s.subscription)==null?void 0:K.status)||"inactive"})]}),((Q=s.subscription)==null?void 0:Q.productUsage)!==void 0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Product Usage"}),e.jsxs("span",{className:"font-bold text-gray-800",children:[s.subscription.productUsage," / ",s.subscription.plan==="gold"?"∞":s.subscription.plan==="premium"?"100+":s.subscription.plan==="basic"?"50":"10"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${s.subscription.plan==="gold"?"bg-yellow-600":s.subscription.plan==="premium"?"bg-purple-600":s.subscription.plan==="basic"?"bg-blue-600":"bg-gray-600"}`,style:{width:`${Math.min(s.subscription.plan==="gold"?100:s.subscription.plan==="premium"?s.subscription.productUsage/100*100:s.subscription.plan==="basic"?s.subscription.productUsage/50*100:s.subscription.productUsage/10*100,100)}%`}})})]}),((W=s.subscription)==null?void 0:W.startDate)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Start Date"}),e.jsx("span",{className:"text-gray-800 font-medium",children:new Date(s.subscription.startDate).toLocaleDateString()})]}),((Y=s.subscription)==null?void 0:Y.endDate)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expires"}),e.jsx("span",{className:"text-gray-800 font-medium",children:new Date(s.subscription.endDate).toLocaleDateString()})]}),((Z=s.subscription)==null?void 0:Z.autoRenew)!==void 0&&e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Auto-Renew"}),e.jsx("span",{className:`text-sm font-semibold ${s.subscription.autoRenew?"text-green-600":"text-gray-500"}`,children:s.subscription.autoRenew?"Enabled":"Disabled"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Order Statistics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Orders"}),e.jsx("span",{className:"font-bold text-gray-800",children:((ee=s.orderStats)==null?void 0:ee.totalOrders)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Completed"}),e.jsx("span",{className:"font-bold text-green-600",children:((se=s.orderStats)==null?void 0:se.completedOrders)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Revenue"}),e.jsxs("span",{className:"font-bold text-gray-800",children:["₦",(((te=s.orderStats)==null?void 0:te.totalRevenue)||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Success Rate"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[(re=s.orderStats)!=null&&re.totalOrders?Math.round(s.orderStats.completedOrders/s.orderStats.totalOrders*100):0,"%"]})]})]})]})]})]})]})}export{Ae as default};
